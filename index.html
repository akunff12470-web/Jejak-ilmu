<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Jejak Ilmu ‚Äì Sekolah Terkunci</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
 margin:0;
 font-family:Arial;
 background:black;
 color:#eee;
 text-align:center;
}
.screen{display:none;padding:20px}
.active{display:block}

button{
 width:100%;
 padding:14px;
 margin-top:10px;
 font-size:16px;
 background:#7b0000;
 color:white;
 border:none;
 border-radius:10px;
}

.card{
 background:#111;
 padding:20px;
 border-radius:10px;
 animation:fade 1s;
}

@keyframes fade{
 from{opacity:0;transform:scale(.95)}
 to{opacity:1;transform:scale(1)}
}

#jumpscare{
 position:fixed;
 inset:0;
 background:black;
 display:none;
 justify-content:center;
 align-items:center;
 z-index:999;
}

#jumpscare div{
 font-size:50px;
 color:red;
 animation:shake .3s infinite;
}

@keyframes shake{
 0%{transform:translate(0)}
 25%{transform:translate(-10px,5px)}
 50%{transform:translate(10px,-5px)}
 75%{transform:translate(-10px,-5px)}
 100%{transform:translate(0)}
}
</style>
</head>

<body>

<div id="start" class="screen active">
 <h1>üè´ JEJAK ILMU</h1>
 <p>Aku terjebak di sekolah tua.</p>
 <p>Cari <b>3 kunci</b> untuk keluar.</p>
 <button onclick="start()">MASUK</button>
</div>

<div id="game" class="screen">
 <h3 id="status"></h3>
 <div class="card">
  <p id="room"></p>
  <p id="story"></p>
  <p id="question"></p>
  <div id="answers"></div>
  <div id="map"></div>
 </div>
</div>

<div id="good" class="screen">
 <h1>üîë ENDING SELAMAT</h1>
 <p>Aku berhasil keluar dari sekolah.</p>
 <button onclick="location.reload()">MAIN LAGI</button>
</div>

<div id="bad" class="screen">
 <h1>‚ò†Ô∏è TERJEBAK SELAMANYA</h1>
 <p>Sekolah ini menelanku.</p>
 <button onclick="location.reload()">COBA LAGI</button>
</div>

<div id="jumpscare"><div>üëÅÔ∏è</div></div>

<audio id="bg" loop>
 <source src="https://www.soundjay.com/nature/sounds/crickets-1.mp3">
</audio>

<audio id="scare">
 <source src="https://www.soundjay.com/human/sounds/scream-02.mp3">
</audio>

<script>
let life=5, keys=0;

const rooms={
 "Gerbang":{
  s:"Aku berdiri di gerbang sekolah yang terkunci.",
  q:"3¬≤ + 4¬≤ = ?",
  a:["25","49","13"], c:0, key:true,
  next:["Lorong"]
 },
 "Lorong":{
  s:"Lorong panjang dan gelap.",
  q:"Akar dari 196?",
  a:["12","14","16"], c:1,
  next:["Kelas","Perpustakaan"]
 },
 "Kelas":{
  s:"Kursi berantakan.",
  q:"15 √ó 8 = ?",
  a:["120","100","130"], c:0, key:true,
  next:["Lorong"]
 },
 "Perpustakaan":{
  s:"Rak buku berderit.",
  q:"Sinonim 'abstrak'?",
  a:["Nyata","Samar","Jelas"], c:1,
  next:["Lorong","Lab"]
 },
 "Lab":{
  s:"Alat praktikum pecah.",
  q:"Planet terbesar?",
  a:["Mars","Jupiter","Venus"], c:1, key:true,
  next:["Tangga"]
 },
 "Tangga":{
  s:"Tangga menuju pintu keluar.",
  q:"FPB 24 dan 36?",
  a:["6","12","18"], c:1,
  next:["Pintu"]
 },
 "Pintu":{
  s:"Pintu keluar di depanku.",
  q:"",
  a:[],
  next:[]
 }
};

let room="Gerbang";

function start(){
 document.getElementById("start").classList.remove("active");
 document.getElementById("game").classList.add("active");
 document.getElementById("bg").play();
 load();
}

function load(){
 let R=rooms[room];
 document.getElementById("status").innerText=
 `‚ù§Ô∏è ${life} | üîë ${keys}/3`;
 document.getElementById("room").innerText=
 `üìç ${room}`;
 document.getElementById("story").innerText=R.s;
 document.getElementById("question").innerText=R.q;
 let a=document.getElementById("answers");
 a.innerHTML="";
 R.a.forEach((x,i)=>{
  let b=document.createElement("button");
  b.innerText=x;
  b.onclick=()=>cek(i);
  a.appendChild(b);
 });
 let m=document.getElementById("map");
 m.innerHTML="";
 R.next.forEach(n=>{
  let b=document.createElement("button");
  b.innerText="‚û°Ô∏è "+n;
  b.onclick=()=>{room=n;load();}
  m.appendChild(b);
 });
 if(room==="Pintu"){
  if(keys>=3){
   document.getElementById("game").classList.remove("active");
   document.getElementById("good").classList.add("active");
  }else{
   document.getElementById("story").innerText=
   "Pintu terkunci. Kuncinya belum cukup.";
  }
 }
}

function cek(i){
 let R=rooms[room];
 if(i===R.c){
  if(R.key){ keys++; R.key=false; }
  load();
 }else{
  life--;
  jumpscare();
  if(life<=0){
   document.getElementById("game").classList.remove("active");
   document.getElementById("bad").classList.add("active");
  }
 }
}

function jumpscare(){
 document.getElementById("jumpscare").style.display="flex";
 document.getElementById("scare").play();
 setTimeout(()=>{
  document.getElementById("jumpscare").style.display="none";
 },600);
}
</script>

</body>
</html>
