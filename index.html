 <script>
const levels = [
 {story:"Kamu terbangun di kelas gelap.",q:"5 + 7 = ?",a:["10","12","14"],c:1},
 {story:"Pintu berderit pelan.",q:"10 x 3 = ?",a:["30","20","40"],c:0},
 {story:"Bayangan menatapmu.",q:"Ibukota Indonesia?",a:["Bandung","Jakarta","Surabaya"],c:1},
 {story:"Buku jatuh sendiri.",q:"12 x 4 = ?",a:["48","44","52"],c:0},
 {story:"Bisikan terdengar.",q:"Sila ke-3 Pancasila?",a:["Persatuan Indonesia","Kemanusiaan","Keadilan"],c:0},
 {story:"Lampu mati.",q:"20 : 4 = ?",a:["6","5","4"],c:1},
 {story:"Langkah kaki mendekat.",q:"Sinonim 'Indah'?",a:["Jelek","Cantik","Buruk"],c:1},
 {story:"Dinding retak.",q:"15 + 10 = ?",a:["20","30","25"],c:2},
 {story:"Pintu terkunci.",q:"Hewan bernapas dengan insang?",a:["Ikan","Kucing","Ayam"],c:0},
 {story:"Suara tertawa.",q:"100 : 10 = ?",a:["5","10","20"],c:1},
 {story:"Bayangan besar muncul.",q:"Benda cair bentuknya?",a:["Tetap","Berubah","Keras"],c:1},
 {story:"Napasmu berat.",q:"5 x 6 = ?",a:["30","20","35"],c:0},
 {story:"Dinding bernoda merah.",q:"Antonim 'Gelap'?",a:["Hitam","Terang","Suram"],c:1},
 {story:"Pintu terakhir.",q:"2² = ?",a:["2","4","6"],c:1},
 {story:"Jawabanmu penentu.",q:"Tujuan teks prosedur?",a:["Menghibur","Menjelaskan langkah","Menceritakan"],c:1}
];

let level = 0;
let life = 3;
let time = 15;
let timer;

function startGame() {
  document.getElementById("start").classList.remove("active");
  document.getElementById("game").classList.add("active");
  loadLevel();
}

function loadLevel() {
  if (level >= levels.length) {
    document.getElementById("game").classList.remove("active");
    document.getElementById("end").classList.add("active");
    return;
  }

  clearInterval(timer);
  time = 15;

  const L = levels[level];
  document.getElementById("levelTitle").innerText =
    `Level ${level+1} | ❤️ ${life} | ⏱️ ${time}s`;
  document.getElementById("story").innerText = L.story;
  document.getElementById("question").innerText = L.q;

  const ans = document.getElementById("answers");
  ans.innerHTML = "";
  L.a.forEach((x,i)=>{
    const b=document.createElement("button");
    b.innerText=x;
    b.onclick=()=>check(i);
    ans.appendChild(b);
  });

  timer = setInterval(()=>{
    time--;
    document.getElementById("levelTitle").innerText =
      `Level ${level+1} | ❤️ ${life} | ⏱️ ${time}s`;

    if(time<=0){
      clearInterval(timer);
      lose();
    }
  },1000);
}

function check(i){
  clearInterval(timer);
  if(i===levels[level].c){
    level++;
    loadLevel();
  } else {
    lose();
  }
}

function lose(){
  life--;
  jumpscare();
  if(life<=0){
    setTimeout(()=>{
      alert("GAME OVER\nBelajarlah lebih baik...");
      location.reload();
    },1200);
  } else {
    setTimeout(loadLevel,1200);
  }
}

function jumpscare(){
  document.getElementById("jumpscare").style.display="flex";
  document.getElementById("scareSound").play();
  setTimeout(()=>{
    document.getElementById("jumpscare").style.display="none";
  },1000);
}
</script>
