<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Jejak Terkunci</title>
<style>
body{margin:0;background:black;color:white;overflow:hidden}
#game{width:100vw;height:100vh;position:relative;background:#000}
.player{width:20px;height:20px;background:white;position:absolute}
.wall{position:absolute;background:#111}
.key{width:14px;height:14px;background:gold;position:absolute}
.ghost{width:25px;height:25px;background:red;position:absolute}
#ui{position:fixed;top:10px;left:10px}
#jumpscare{
  display:none;position:fixed;inset:0;
  background:black;color:red;
  font-size:60px;
  justify-content:center;
  align-items:center;
}
</style>
</head>

<body>

<div id="game">
  <div id="player" class="player"></div>
  <div id="ghost" class="ghost"></div>

  <!-- WALLS (MAP SEKOLAH) -->
  <div class="wall" style="left:0;top:0;width:100%;height:20px"></div>
  <div class="wall" style="left:0;top:0;width:20px;height:100%"></div>
  <div class="wall" style="left:0;bottom:0;width:100%;height:20px"></div>
  <div class="wall" style="right:0;top:0;width:20px;height:100%"></div>

  <div class="wall" style="left:200px;top:100px;width:20px;height:300px"></div>
  <div class="wall" style="left:400px;top:0;width:20px;height:300px"></div>

</div>

<div id="ui">
‚ù§Ô∏è <span id="life">5</span><br>
üîë <span id="keys">0</span>/10
</div>

<div id="jumpscare">üëª</div>

<audio id="step" src="https://www.soundjay.com/human/footsteps-1.mp3"></audio>
<audio id="ambience" autoplay loop src="https://www.soundjay.com/nature/crickets-1.mp3"></audio>
<audio id="whisper" src="https://www.soundjay.com/human/whisper-01.mp3"></audio>
<audio id="scream" src="https://www.soundjay.com/human/scream-01.mp3"></audio>

<script>
const player=document.getElementById("player");
const ghost=document.getElementById("ghost");
const walls=document.querySelectorAll(".wall");
const jumpscare=document.getElementById("jumpscare");
const step=document.getElementById("step");
const whisper=document.getElementById("whisper");
const scream=document.getElementById("scream");

let x=50,y=50,life=5,keys=0;
let gx=500,gy=200;

player.style.left=x+"px";player.style.top=y+"px";

for(let i=0;i<10;i++){
 let k=document.createElement("div");
 k.className="key";
 k.style.left=Math.random()*600+50+"px";
 k.style.top=Math.random()*400+50+"px";
 game.appendChild(k);
}

document.addEventListener("keydown",e=>{
 let ox=x,oy=y;
 if(e.key==="w")y-=10;
 if(e.key==="s")y+=10;
 if(e.key==="a")x-=10;
 if(e.key==="d")x+=10;
 player.style.left=x+"px";player.style.top=y+"px";
 step.play();
 if(hitWall()){x=ox;y=oy;}
 checkKey();
});

function hitWall(){
 return [...walls].some(w=>
  x<w.offsetLeft+w.offsetWidth &&
  x+20>w.offsetLeft &&
  y<w.offsetTop+w.offsetHeight &&
  y+20>w.offsetTop);
}

function checkKey(){
 document.querySelectorAll(".key").forEach(k=>{
  if(Math.abs(x-k.offsetLeft)<20){
    k.remove(); keys++;
    document.getElementById("keys").innerText=keys;
    whisper.play();
  }
 });
}

setInterval(()=>{
 gx+=(x-gx)*0.02; gy+=(y-gy)*0.02;
 ghost.style.left=gx+"px"; ghost.style.top=gy+"px";
 if(Math.abs(x-gx)<20){ hit(); }
 if(Math.random()<0.01) whisper.play();
},40);

function hit(){
 life--; document.getElementById("life").innerText=life;
 scream.play();
 jumpscare.style.display="flex";
 setTimeout(()=>jumpscare.style.display="none",500);
 x=50;y=50;
 if(life<=0){ alert("ENDING: TERJEBAK SELAMANYA"); location.reload(); }
}
</script>
</body>
</html>
