<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Jejak Terkunci</title>
<style>
  body {
    margin: 0;
    background: black;
    color: white;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }

  #game {
    position: relative;
    width: 100vw;
    height: 100vh;
    background: #050505;
  }

  .player {
    width: 20px;
    height: 20px;
    background: white;
    position: absolute;
    left: 50px;
    top: 50px;
  }

  .key {
    width: 15px;
    height: 15px;
    background: gold;
    position: absolute;
  }

  .motorKey {
    width: 18px;
    height: 18px;
    background: cyan;
    position: absolute;
    display: none;
  }

  .ghost {
    width: 25px;
    height: 25px;
    background: red;
    position: absolute;
  }

  #ui {
    position: fixed;
    top: 10px;
    left: 10px;
    font-size: 16px;
  }

  #jumpscare {
    display: none;
    position: fixed;
    inset: 0;
    background: black;
    justify-content: center;
    align-items: center;
    font-size: 60px;
    color: red;
    z-index: 999;
  }

  #exit {
    position: absolute;
    right: 20px;
    bottom: 20px;
    width: 40px;
    height: 40px;
    background: green;
    display: none;
  }
</style>
</head>

<body>

<div id="game">
  <div class="player" id="player"></div>
  <div class="ghost" id="ghost"></div>
  <div class="motorKey" id="motorKey"></div>
  <div id="exit"></div>
</div>

<div id="ui">
  ‚ù§Ô∏è Nyawa: <span id="life">5</span><br>
  üîë Kunci: <span id="keys">0</span>/10<br>
  üèçÔ∏è Kunci Motor: <span id="motor">‚ùå</span>
</div>

<div id="jumpscare">üëª</div>

<audio id="ambience" loop autoplay>
  <source src="https://www.soundjay.com/nature/crickets-1.mp3">
</audio>

<audio id="scream">
  <source src="https://www.soundjay.com/human/scream-01.mp3">
</audio>

<script>
const player = document.getElementById("player");
const ghost = document.getElementById("ghost");
const motorKey = document.getElementById("motorKey");
const exit = document.getElementById("exit");
const jumpscare = document.getElementById("jumpscare");
const scream = document.getElementById("scream");

let x = 50, y = 50;
let gx = 300, gy = 200;
let life = 5;
let keys = 0;
let hasMotorKey = false;

ghost.style.left = gx + "px";
ghost.style.top = gy + "px";

// BUAT 10 KUNCI
for (let i = 0; i < 10; i++) {
  const k = document.createElement("div");
  k.className = "key";
  k.style.left = Math.random() * (window.innerWidth - 50) + "px";
  k.style.top = Math.random() * (window.innerHeight - 50) + "px";
  document.getElementById("game").appendChild(k);
}

// POSISI KUNCI MOTOR
motorKey.style.left = "80%";
motorKey.style.top = "10%";

// GERAK PLAYER
document.addEventListener("keydown", e => {
  if (e.key === "w") y -= 10;
  if (e.key === "s") y += 10;
  if (e.key === "a") x -= 10;
  if (e.key === "d") x += 10;

  player.style.left = x + "px";
  player.style.top = y + "px";

  checkKey();
  checkMotorKey();
  checkExit();
});

// GHOST KEJAR PLAYER
setInterval(() => {
  gx += (x - gx) * 0.02;
  gy += (y - gy) * 0.02;

  ghost.style.left = gx + "px";
  ghost.style.top = gy + "px";

  if (Math.abs(x - gx) < 20 && Math.abs(y - gy) < 20) {
    hit();
  }
}, 30);

// AMBIL KUNCI
function checkKey() {
  document.querySelectorAll(".key").forEach(k => {
    if (Math.abs(x - k.offsetLeft) < 20 &&
        Math.abs(y - k.offsetTop) < 20) {
      k.remove();
      keys++;
      document.getElementById("keys").innerText = keys;

      if (keys === 10) {
        alert("Semua kunci terkumpul!\nKunci motor muncul!");
        motorKey.style.display = "block";
      }
    }
  });
}

// AMBIL KUNCI MOTOR
function checkMotorKey() {
  if (!hasMotorKey &&
      Math.abs(x - motorKey.offsetLeft) < 20 &&
      Math.abs(y - motorKey.offsetTop) < 20) {

    hasMotorKey = true;
    motorKey.style.display = "none";
    document.getElementById("motor").innerText = "‚úîÔ∏è";
    alert("Kunci motor didapat!\nCari pintu keluar!");
    exit.style.display = "block";
  }
}

// KELUAR SEKOLAH
function checkExit() {
  if (hasMotorKey &&
      Math.abs(x - exit.offsetLeft) < 30 &&
      Math.abs(y - exit.offsetTop) < 30) {
    alert("ENDING: KABUR\nKamu berhasil keluar dari sekolah!");
    location.reload();
  }
}

// JUMPSCARE
function hit() {
  life--;
  document.getElementById("life").innerText = life;
  scream.play();

  jumpscare.style.display = "flex";
  setTimeout(() => jumpscare.style.display = "none", 500);

  x = 50;
  y = 50;

  if (life <= 0) {
    alert("ENDING: TERKUNCI SELAMANYA");
    location.reload();
  }
}
</script>

</body>
</html>
